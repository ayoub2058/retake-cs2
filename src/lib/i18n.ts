export const LANG_COOKIE = "lang";

export const SUPPORTED_LANGUAGES = ["en", "ar"] as const;
export type Language = (typeof SUPPORTED_LANGUAGES)[number];

const messages = {
  en: {
    languageEnglish: "English",
    languageArabic: "Arabic",
    languageLabel: "Language",
    controlRoom: "Control Room",
    matchHistory: "Match History",
    playerStats: "Player Stats",
    searchPlaceholder: "Search CS2 players",
    matchIntelligence: "Match Intelligence",
    yourMatchHistory: "Your Match History",
    noMatchesFound:
      "No matches found yet. Play a competitive match to see it appear here!",
    matchDetails: "Match Details",
    signInRequired: "Sign in required",
    signInToView: "Please sign in to view match details.",
    matchNotFound: "Match not found",
    matchNotFoundDesc: "We could not locate this match in the matches table yet.",
    statsUnavailable: "Stats unavailable",
    statsUnavailableDesc: "Failed to load player stats for this match.",
    finalScore: "Final Score",
    winner: "Winner",
    roundTimeline: "Round Timeline",
    scoreboard: "Scoreboard",
    fullMatchStats: "Full Match Stats",
    ctSquad: "CT Squad",
    tSquad: "T Squad",
    unassigned: "Unassigned",
    mvp: "MVP",
    scoreUnavailable: "Score unavailable",
    duration: "Duration",
    date: "Date",
    map: "Map",
    action: "Action",
    viewDetails: "View Details",
    unknown: "Unknown",
    unknownMap: "Unknown Map",
    lifetimeSummary: "Lifetime Summary",
    yourPerformance: "Your Performance",
    avgKD: "Avg K/D",
    avgADR: "Avg ADR",
    winRate: "Win Rate",
    loadingStats: "Loading stats...",
    lastMatches: "Last {count} matches",
    adrTrend: "ADR Trend",
    last20Matches: "Last 20 Matches",
    playstyleRadar: "Playstyle Radar",
    coreAttributes: "Core Attributes",
    aim: "Aim",
    aggression: "Aggression",
    utility: "Utility",
    survival: "Survival",
    impact: "Impact",
    coachSettings: "Coach Settings",
    customizeCoach: "Customize Your AI Coach",
    addBot: "Add Bot to Steam",
    coachStyle: "Coach Style",
    narrativeStyle: "Narrative (Long detailed report)",
    shortStyle: "Short (1-2 sentences)",
    statsOnlyStyle: "Stats Only (Just the numbers)",
    loadingSettings: "Loading settings...",
    preferencesSaved: "Preferences are saved to your profile.",
    saveSettings: "Save Settings",
    saving: "Saving...",
    settingsSaved: "Settings Saved!",
    settingsSaveFailed: "Failed to save settings.",
    secureMatchTracking: "Secure Match Tracking",
    oneLastStep: "One Last Step, {username}",
    trackMatchesDescription:
      "To track your matches, we need your Game Authentication Code and the most recent match token from Steam.",
    gameAuthCode: "Game Authentication Code",
    matchToken: "Most Recent Match Token",
    getCodeHere: "Get your code here",
    saveCode: "Save Code",
    savingCode: "Saving...",
    guestTitle: "CS2 Tactical Intelligence",
    guestSubtitle: "Analyze Your CS2 Matches Automatically",
    guestDescription:
      "Connect your Steam account to collect replays, break down rounds, and surface the moments that matter.",
    signInWithSteam: "Sign in with Steam",
    instantReplays: "Instant replay downloads. Zero manual uploads.",
    errorSignedIn: "You need to be signed in to save a code.",
    errorInvalidCode: "Invalid code format. Use AAAA-AAAAA-AAAA.",
    errorInvalidToken:
      "Invalid match token. Use CSGO-AAAAA-BBBBB-CCCCC-DDDDD-EEEEE.",
    errorUserNotFound: "User record not found.",
    errorSaveAuthFailed: "Failed to save authentication code.",
    searchFailed: "Search failed.",
    noPlayersFound: "No players found.",
    playerUnknown: "Unknown",
    statsAvailable: "Stats Available",
    steamProfileOnly: "Steam Profile Only",
    rankLabel: "Rank",
    faceit: "Faceit",
    naLabel: "N/A",
    playerProfile: "Player Profile",
    profileUnavailable: "Profile unavailable",
    failedLoadMatchHistory: "Failed to load local match history for {steamId}.",
    leetifyPlayer: "Leetify Player",
    steamIdLabel: "Steam ID",
    notInDatabase:
      "Not added to our database yet. You can search for it on Leetify.",
    leetifyMatchHistory: "Leetify Match History (External)",
    firstMatch: "First match",
    totalMatches: "Total Matches",
    premier: "Premier",
    level: "Level",
    positioning: "Positioning",
    reactionTime: "Reaction (ms)",
    hsAccuracy: "HS Accuracy",
    recentMatches: "Recent Matches",
    noLeetifyMatches: "No match history available from Leetify.",
    viewOnLeetify: "View on Leetify",
    newPlayer: "New Player",
    noMatchHistoryFound: "No match history found.",
    localHistoryAvailable: "Local match history available.",
    noMatches: "No matches",
    aboveFifty: "Above 50%",
    belowFifty: "Below 50%",
    evenWinRate: "Even",
    team: "Team",
    round: "Round",
    reason: "Reason",
    score: "Score",
    kdLabel: "K/D",
    adrLabel: "ADR",
    hsLabel: "HS%",
    assists: "Assists",
    openingKD: "Opening K/D",
    utilityDmg: "Utility Dmg",
    tradeKills: "Trade Kills",
  },
  ar: {
    languageEnglish: "الإنجليزية",
    languageArabic: "العربية",
    languageLabel: "اللغة",
    controlRoom: "غرفة التحكم",
    matchHistory: "سجل المباريات",
    playerStats: "إحصائيات اللاعب",
    searchPlaceholder: "ابحث عن لاعبي CS2",
    matchIntelligence: "ذكاء المباريات",
    yourMatchHistory: "سجل مبارياتك",
    noMatchesFound: "لا توجد مباريات بعد. العب مباراة تنافسية لتظهر هنا.",
    matchDetails: "تفاصيل المباراة",
    signInRequired: "تسجيل الدخول مطلوب",
    signInToView: "يرجى تسجيل الدخول لعرض تفاصيل المباراة.",
    matchNotFound: "لم يتم العثور على المباراة",
    matchNotFoundDesc: "لم نعثر على هذه المباراة في جدول المباريات بعد.",
    statsUnavailable: "الإحصائيات غير متاحة",
    statsUnavailableDesc: "تعذر تحميل إحصائيات اللاعبين لهذه المباراة.",
    finalScore: "النتيجة النهائية",
    winner: "الفائز",
    roundTimeline: "تسلسل الجولات",
    scoreboard: "لوحة النتائج",
    fullMatchStats: "إحصائيات المباراة كاملة",
    ctSquad: "فريق CT",
    tSquad: "فريق T",
    unassigned: "غير مُعيّن",
    mvp: "أفضل لاعب",
    scoreUnavailable: "النتيجة غير متاحة",
    duration: "المدة",
    date: "التاريخ",
    map: "الخريطة",
    action: "الإجراء",
    viewDetails: "عرض التفاصيل",
    unknown: "غير معروف",
    unknownMap: "خريطة غير معروفة",
    lifetimeSummary: "ملخص شامل",
    yourPerformance: "أداؤك",
    avgKD: "متوسط K/D",
    avgADR: "متوسط ADR",
    winRate: "نسبة الفوز",
    loadingStats: "جارٍ تحميل الإحصائيات...",
    lastMatches: "آخر {count} مباراة",
    adrTrend: "اتجاه ADR",
    last20Matches: "آخر 20 مباراة",
    playstyleRadar: "رادار أسلوب اللعب",
    coreAttributes: "السمات الأساسية",
    aim: "التصويب",
    aggression: "الاندفاع",
    utility: "الاستخدامات",
    survival: "البقاء",
    impact: "التأثير",
    coachSettings: "إعدادات المدرب",
    customizeCoach: "خصص مدربك بالذكاء الاصطناعي",
    addBot: "إضافة البوت إلى Steam",
    coachStyle: "أسلوب المدرب",
    narrativeStyle: "سردي (تقرير طويل ومفصل)",
    shortStyle: "قصير (جملتان)",
    statsOnlyStyle: "إحصائيات فقط (أرقام فقط)",
    loadingSettings: "جارٍ تحميل الإعدادات...",
    preferencesSaved: "يتم حفظ التفضيلات في ملفك الشخصي.",
    saveSettings: "حفظ الإعدادات",
    saving: "جارٍ الحفظ...",
    settingsSaved: "تم حفظ الإعدادات!",
    settingsSaveFailed: "فشل حفظ الإعدادات.",
    secureMatchTracking: "تتبع آمن للمباريات",
    oneLastStep: "خطوة أخيرة، {username}",
    trackMatchesDescription:
      "لتتبع مبارياتك، نحتاج إلى رمز التحقق للعبة وآخر رمز مباراة من Steam.",
    gameAuthCode: "رمز التحقق للعبة",
    matchToken: "آخر رمز مباراة",
    getCodeHere: "احصل على رمزك من هنا",
    saveCode: "حفظ الرمز",
    savingCode: "جارٍ الحفظ...",
    guestTitle: "ذكاء تكتيكي لـ CS2",
    guestSubtitle: "حلل مباريات CS2 تلقائيا",
    guestDescription:
      "اربط حساب Steam لجمع الإعادات، وتحليل الجولات، وإبراز اللحظات المهمة.",
    signInWithSteam: "تسجيل الدخول عبر Steam",
    instantReplays: "تحميل فوري للإعادات. بدون رفع يدوي.",
    errorSignedIn: "يجب تسجيل الدخول لحفظ الرمز.",
    errorInvalidCode: "تنسيق الرمز غير صحيح. استخدم AAAA-AAAAA-AAAA.",
    errorInvalidToken:
      "رمز المباراة غير صحيح. استخدم CSGO-AAAAA-BBBBB-CCCCC-DDDDD-EEEEE.",
    errorUserNotFound: "لم يتم العثور على سجل المستخدم.",
    errorSaveAuthFailed: "فشل حفظ رمز التحقق.",
    searchFailed: "فشل البحث.",
    noPlayersFound: "لم يتم العثور على لاعبين.",
    playerUnknown: "غير معروف",
    statsAvailable: "الإحصائيات متاحة",
    steamProfileOnly: "ملف Steam فقط",
    rankLabel: "الرتبة",
    faceit: "Faceit",
    naLabel: "غير متاح",
    playerProfile: "ملف اللاعب",
    profileUnavailable: "الملف غير متاح",
    failedLoadMatchHistory: "تعذر تحميل سجل المباريات المحلي لـ {steamId}.",
    leetifyPlayer: "لاعب Leetify",
    steamIdLabel: "معرّف Steam",
    notInDatabase: "لم يُضف بعد إلى قاعدة البيانات. يمكنك البحث عنه في Leetify.",
    leetifyMatchHistory: "سجل مباريات Leetify (خارجي)",
    firstMatch: "أول مباراة",
    totalMatches: "إجمالي المباريات",
    premier: "Premier",
    level: "المستوى",
    positioning: "التموضع",
    reactionTime: "زمن الاستجابة (مللي ثانية)",
    hsAccuracy: "دقة الهيدشوت",
    recentMatches: "المباريات الأخيرة",
    noLeetifyMatches: "لا يوجد سجل مباريات من Leetify.",
    viewOnLeetify: "عرض على Leetify",
    newPlayer: "لاعب جديد",
    noMatchHistoryFound: "لم يتم العثور على سجل مباريات.",
    localHistoryAvailable: "سجل المباريات المحلي متاح.",
    noMatches: "لا توجد مباريات",
    aboveFifty: "أعلى من 50%",
    belowFifty: "أقل من 50%",
    evenWinRate: "متعادل",
    team: "الفريق",
    round: "جولة",
    reason: "السبب",
    score: "النتيجة",
    kdLabel: "K/D",
    adrLabel: "ADR",
    hsLabel: "HS%",
    assists: "المساعدات",
    openingKD: "افتتاح K/D",
    utilityDmg: "ضرر الأدوات",
    tradeKills: "قتلات التبادل",
  },
} as const;

export type TranslationKey = keyof (typeof messages)["en"];

export const normalizeLanguage = (value: string | null | undefined): Language => {
  if (value === "ar") {
    return "ar";
  }
  return "en";
};

export const getLocale = (lang: Language) => (lang === "ar" ? "ar" : "en-US");

export const getDirection = (lang: Language) => (lang === "ar" ? "rtl" : "ltr");

const formatMessage = (
  template: string,
  vars?: Record<string, string | number>
) => {
  if (!vars) {
    return template;
  }
  return Object.entries(vars).reduce((result, [key, value]) => {
    return result.replaceAll(`{${key}}`, String(value));
  }, template);
};

export const getTranslations = (lang: Language) => {
  return (key: TranslationKey, vars?: Record<string, string | number>) => {
    const template = messages[lang][key] ?? messages.en[key] ?? key;
    return formatMessage(template, vars);
  };
};
